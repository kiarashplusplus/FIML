fiml/narrative/models.py:177: error: Missing named argument "max_length_chars" for "NarrativePreferences"  [call-arg]
fiml/narrative/models.py:177: error: Missing named argument "min_confidence" for "NarrativePreferences"  [call-arg]
fiml/services/user_key_onboarding_service.py:567: error: Argument "params" to "get" of "ClientSession" has incompatible type "dict[str, object]"; expected "str | Mapping[str, str | SupportsInt | float | Sequence[str | SupportsInt | float]] | Sequence[tuple[str, str | SupportsInt | float | Sequence[str | SupportsInt | float]]] | None"  [arg-type]
fiml/cache/l1_cache.py:98: error: "Redis[Any]" has no attribute "aclose"; maybe "close"?  [attr-defined]
fiml/sessions/store.py:370: error: Incompatible types in assignment (expression has type "bool", variable has type "Column[bool]")  [assignment]
fiml/sessions/store.py:371: error: Incompatible types in assignment (expression has type "datetime", variable has type "Column[datetime]")  [assignment]
fiml/sessions/store.py:455: error: "Column[Any]" has no attribute "__iter__"; maybe "__str__"? (not iterable)  [attr-defined]
fiml/sessions/store.py:458: error: Argument "total_queries" to "AnalysisHistory" has incompatible type "Column[int]"; expected "int"  [arg-type]
fiml/sessions/store.py:459: error: Argument "first_query_at" to "AnalysisHistory" has incompatible type "Column[datetime]"; expected "datetime | None"  [arg-type]
fiml/sessions/store.py:460: error: Argument "last_query_at" to "AnalysisHistory" has incompatible type "Column[datetime]"; expected "datetime | None"  [arg-type]
fiml/sessions/store.py:467: error: Argument "context" to "SessionState" has incompatible type "Column[Any]"; expected "dict[str, Any]"  [arg-type]
fiml/sessions/store.py:468: error: Argument "preferences" to "SessionState" has incompatible type "Column[Any]"; expected "dict[str, Any]"  [arg-type]
fiml/sessions/store.py:469: error: Argument "intermediate_results" to "SessionState" has incompatible type "Column[Any]"; expected "dict[str, Any]"  [arg-type]
fiml/sessions/store.py:470: error: Argument "metadata" to "SessionState" has incompatible type "Column[Any]"; expected "dict[str, Any]"  [arg-type]
fiml/sessions/analytics.py:146: error: Need type annotation for "metrics" (hint: "metrics: List[<type>] = ...")  [var-annotated]
fiml/sessions/analytics.py:157: error: Incompatible types in assignment (expression has type "Sequence[SessionMetrics]", variable has type "list[Any]")  [assignment]
fiml/sessions/analytics.py:299: error: Generator has incompatible item type "int"; expected "bool"  [misc]
fiml/agents/workers.py:621: error: Argument "symbol" to "Asset" has incompatible type "object"; expected "str"  [arg-type]
fiml/agents/workers.py:734: error: Unsupported operand types for > ("float" and "object")  [operator]
fiml/agents/workers.py:734: error: Unsupported operand types for < ("float" and "object")  [operator]
fiml/agents/workers.py:737: error: Unsupported operand types for < ("float" and "object")  [operator]
fiml/agents/workers.py:1140: error: Incompatible types in assignment (expression has type "float", variable has type "floating[Any]")  [assignment]
fiml/sessions/tasks.py:87: error: "Result[Any]" has no attribute "rowcount"  [attr-defined]
fiml/bot/key_router.py:120: error: List comprehension has incompatible type List[dict[str, Any]]; expected List[Provider]  [misc]
fiml/narrative/batch.py:265: error: Missing named argument "min_confidence" for "NarrativePreferences"  [call-arg]
fiml/mcp/tools.py:510: error: Missing named argument "min_confidence" for "NarrativePreferences"  [call-arg]
fiml/mcp/tools.py:889: error: Missing named argument "min_confidence" for "NarrativePreferences"  [call-arg]
fiml/mcp/tools.py:1264: error: Missing named argument "min_confidence" for "NarrativePreferences"  [call-arg]
fiml/bot/education/ai_mentor.py:208: error: Missing named argument "max_length_chars" for "NarrativePreferences"  [call-arg]
fiml/bot/education/ai_mentor.py:208: error: Missing named argument "min_confidence" for "NarrativePreferences"  [call-arg]
fiml/bot/education/ai_mentor.py:209: error: Argument "expertise_level" to "NarrativePreferences" has incompatible type "str"; expected "ExpertiseLevel"  [arg-type]
fiml/bot/education/fiml_adapter.py:148: error: Incompatible types in assignment (expression has type "SearchBySymbolResponse", variable has type "SearchByCoinResponse")  [assignment]
fiml/bot/education/fiml_adapter.py:159: error: "SearchByCoinResponse" has no attribute "structural_data"  [attr-defined]
fiml/bot/education/fiml_adapter.py:463: error: Incompatible types in assignment (expression has type "SearchBySymbolResponse", variable has type "SearchByCoinResponse")  [assignment]
fiml/bot/adapters/telegram_adapter.py:199: error: Item "None" of "User | None" has no attribute "first_name"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:217: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:247: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:281: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:288: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:291: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:291: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:292: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
fiml/bot/adapters/telegram_adapter.py:298: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:323: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:329: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:330: error: Item "None" of "dict[Any, Any] | None" has no attribute "get"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:331: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:331: error: Item "None" of "str | Any | None" has no attribute "strip"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:334: error: Argument 1 to "validate_key_format" of "UserProviderKeyManager" has incompatible type "Any | None"; expected "str"  [arg-type]
fiml/bot/adapters/telegram_adapter.py:335: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:342: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:344: error: Argument 1 to "test_provider_key" of "UserProviderKeyManager" has incompatible type "Any | None"; expected "str"  [arg-type]
fiml/bot/adapters/telegram_adapter.py:347: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:354: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
fiml/bot/adapters/telegram_adapter.py:355: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
fiml/bot/adapters/telegram_adapter.py:376: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:385: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:387: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:387: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:390: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:394: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:395: error: Item "None" of "dict[Any, Any] | None" has no attribute "get"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:396: error: Item "None" of "dict[Any, Any] | None" has no attribute "get"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:397: error: Item "None" of "dict[Any, Any] | None" has no attribute "get"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:404: error: Argument 2 to "store_user_key" of "UserProviderKeyManager" has incompatible type "Any | None"; expected "str"  [arg-type]
fiml/bot/adapters/telegram_adapter.py:404: error: Argument 3 to "store_user_key" of "UserProviderKeyManager" has incompatible type "Any | None"; expected "str"  [arg-type]
fiml/bot/adapters/telegram_adapter.py:419: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:421: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:424: error: Item "None" of "dict[Any, Any] | None" has no attribute "clear"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:430: error: Item "None" of "dict[Any, Any] | None" has no attribute "clear"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:431: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:436: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:467: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:471: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:476: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:495: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:500: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:502: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:503: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:503: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:509: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:515: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:521: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:526: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:529: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:543: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:547: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:572: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:648: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:678: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:683: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:685: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:686: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:686: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:706: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:730: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:734: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:762: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
fiml/bot/adapters/telegram_adapter.py:767: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:798: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:803: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:805: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:808: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:808: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:816: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:821: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:834: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:837: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:847: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:875: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:912: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:917: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:921: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:922: error: Item "None" of "Message | None" has no attribute "text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:925: error: Item "None" of "dict[Any, Any] | None" has no attribute "get"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:929: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:933: error: Argument "question" to "respond" of "AIMentorService" has incompatible type "str | Any | None"; expected "str"  [arg-type]
fiml/bot/adapters/telegram_adapter.py:945: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:949: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:965: error: Item "None" of "str | Any | None" has no attribute "lower"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:966: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:979: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1012: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1017: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1019: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1019: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1030: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
fiml/bot/adapters/telegram_adapter.py:1048: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1052: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1091: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1122: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1127: error: Item "None" of "CallbackQuery | None" has no attribute "answer"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1129: error: Item "None" of "User | None" has no attribute "id"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1130: error: Item "None" of "CallbackQuery | None" has no attribute "data"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1130: error: Item "None" of "str | Any | None" has no attribute "split"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1134: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1160: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1161: error: Unsupported target for indexed assignment ("dict[Any, Any] | None")  [index]
fiml/bot/adapters/telegram_adapter.py:1179: error: Item "None" of "CallbackQuery | None" has no attribute "edit_message_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1212: error: Item "None" of "CallbackQuery | None" has no attribute "message"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1212: error: Item "MaybeInaccessibleMessage" of "MaybeInaccessibleMessage | Any | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1212: error: Item "None" of "MaybeInaccessibleMessage | Any | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1217: error: Item "None" of "CallbackQuery | None" has no attribute "message"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1217: error: Item "None" of "MaybeInaccessibleMessage | Any | None" has no attribute "chat"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1222: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1253: error: Item "None" of "CallbackQuery | None" has no attribute "message"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1253: error: Item "MaybeInaccessibleMessage" of "MaybeInaccessibleMessage | Any | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1253: error: Item "None" of "MaybeInaccessibleMessage | Any | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1255: error: Item "None" of "Message | None" has no attribute "reply_text"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1372: error: Item "None" of "Updater | None" has no attribute "start_polling"  [union-attr]
fiml/bot/adapters/telegram_adapter.py:1378: error: Item "None" of "Updater | None" has no attribute "stop"  [union-attr]
fiml/web/market_api.py:119: error: Incompatible types in assignment (expression has type "SearchBySymbolResponse", variable has type "SearchByCoinResponse")  [assignment]
fiml/bot/run_bot.py:116: error: Item "None" of "Updater | None" has no attribute "start_polling"  [union-attr]
fiml/bot/run_bot.py:130: error: Item "None" of "Updater | None" has no attribute "stop"  [union-attr]
Found 154 errors in 15 files (checked 122 source files)
